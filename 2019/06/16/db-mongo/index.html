<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="è€å¸æœºç§èœ" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0">






<meta name="description" content="Mongoä¹‹å®‰è£…å‚è€ƒ Centos1.ä¸‹è½½å®‰è£…åŒ…è¿œç¨‹å®‰è£…mongodbå‹ç¼©åŒ… 1wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.9.tgz  2.è§£å‹ç¼©å®‰è£…åŒ…åœ¨/optä¸‹åˆ›å»ºmodulesæ–‡ä»¶å¤¹ 1mkdir modules  ç„¶åè§£å‹åˆ°è¿™é‡Œ: 12cd ~tar -xzvf mongodb-linux-x86_64-3">
<meta property="og:type" content="article">
<meta property="og:title" content="db-mongo">
<meta property="og:url" content="http://wodekouwei.com/2019/06/16/db-mongo/index.html">
<meta property="og:site_name" content="è€å¸æœºç§èœ">
<meta property="og:description" content="Mongoä¹‹å®‰è£…å‚è€ƒ Centos1.ä¸‹è½½å®‰è£…åŒ…è¿œç¨‹å®‰è£…mongodbå‹ç¼©åŒ… 1wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.9.tgz  2.è§£å‹ç¼©å®‰è£…åŒ…åœ¨/optä¸‹åˆ›å»ºmodulesæ–‡ä»¶å¤¹ 1mkdir modules  ç„¶åè§£å‹åˆ°è¿™é‡Œ: 12cd ~tar -xzvf mongodb-linux-x86_64-3">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-07-22T06:11:22.819Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="db-mongo">
<meta name="twitter:description" content="Mongoä¹‹å®‰è£…å‚è€ƒ Centos1.ä¸‹è½½å®‰è£…åŒ…è¿œç¨‹å®‰è£…mongodbå‹ç¼©åŒ… 1wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.9.tgz  2.è§£å‹ç¼©å®‰è£…åŒ…åœ¨/optä¸‹åˆ›å»ºmodulesæ–‡ä»¶å¤¹ 1mkdir modules  ç„¶åè§£å‹åˆ°è¿™é‡Œ: 12cd ~tar -xzvf mongodb-linux-x86_64-3">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wodekouwei.com/2019/06/16/db-mongo/">





  <title> db-mongo | è€å¸æœºç§èœ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2021aa5f03a4203621d42ef374e0d5f7";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">è€å¸æœºç§èœ</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            å…¬ç›Š404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            æœç´¢
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://wodekouwei.com/2019/06/16/db-mongo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="è½»å£å‘³">
      <meta itemprop="description" content>
      <meta itemprop="image" content="http://images.wodekouwei.com/avatar/winnle_the_pooh.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="è€å¸æœºç§èœ">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                db-mongo
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-06-16T18:02:48+08:00">
                2019-06-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a class="cloud-tie-join-count" href="/2019/06/16/db-mongo/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count join-count" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">æœ¬æ–‡æ€»é˜…è¯»é‡
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>æ¬¡
            </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="Mongoä¹‹å®‰è£…"><a href="#Mongoä¹‹å®‰è£…" class="headerlink" title="Mongoä¹‹å®‰è£…"></a>Mongoä¹‹å®‰è£…</h3><p><a href="https://docs.mongodb.com/master/tutorial/install-mongodb-on-os-x/?_ga=1.77041618.692823854.1464012466" target="_blank" rel="noopener">å‚è€ƒ</a></p>
<h4 id="Centos"><a href="#Centos" class="headerlink" title="Centos"></a>Centos</h4><h5 id="1-ä¸‹è½½å®‰è£…åŒ…"><a href="#1-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="1.ä¸‹è½½å®‰è£…åŒ…"></a>1.ä¸‹è½½å®‰è£…åŒ…</h5><p>è¿œç¨‹å®‰è£…mongodbå‹ç¼©åŒ…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.4.9.tgz</span><br></pre></td></tr></table></figure>

<h5 id="2-è§£å‹ç¼©å®‰è£…åŒ…"><a href="#2-è§£å‹ç¼©å®‰è£…åŒ…" class="headerlink" title="2.è§£å‹ç¼©å®‰è£…åŒ…"></a>2.è§£å‹ç¼©å®‰è£…åŒ…</h5><p>åœ¨/optä¸‹åˆ›å»ºmodulesæ–‡ä»¶å¤¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir modules</span><br></pre></td></tr></table></figure>

<p>ç„¶åè§£å‹åˆ°è¿™é‡Œ:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">tar -xzvf mongodb-linux-x86_64-3.4.9.tgz -C /opt/modules/</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥modulesæ–‡ä»¶å¤¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/modules/</span><br></pre></td></tr></table></figure>

<p>é‡å‘½åä¸ºmongodb</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv mongodb-linux-x86_64-3.4.9 mongodb </span><br><span class="line">cd mongodb/</span><br></pre></td></tr></table></figure>

<h5 id="3-åˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½•å’Œæ—¥å¿—å­˜æ”¾ç›®å½•"><a href="#3-åˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½•å’Œæ—¥å¿—å­˜æ”¾ç›®å½•" class="headerlink" title="3.åˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½•å’Œæ—¥å¿—å­˜æ”¾ç›®å½•"></a>3.åˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½•å’Œæ—¥å¿—å­˜æ”¾ç›®å½•</h5><p>å°†æœåŠ¡çš„æ•°æ®å­˜æ”¾åœ¨/opt/dataç›®å½•ä¸‹,éœ€è¦åˆ›å»ºdbç›®å½•ç”¨äºå­˜æ”¾æ•°æ®åº“æ–‡ä»¶,logsç›®å½•å­˜æ”¾æ—¥å¿—æ–‡ä»¶:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/data/mongodb/data </span><br><span class="line">mkdir -p /opt/data/mongodb/data/db </span><br><span class="line">mkdir -p /opt/data/mongodb/data/logs </span><br><span class="line">touch /opt/data/mongodb/data/logs/mogodb.log</span><br></pre></td></tr></table></figure>

<h5 id="4-åˆ›å»ºMongoDBé…ç½®æ–‡ä»¶mongodb-conf"><a href="#4-åˆ›å»ºMongoDBé…ç½®æ–‡ä»¶mongodb-conf" class="headerlink" title="4.åˆ›å»ºMongoDBé…ç½®æ–‡ä»¶mongodb.conf"></a>4.åˆ›å»ºMongoDBé…ç½®æ–‡ä»¶mongodb.conf</h5><p>mongodb.confä¸»è¦é…ç½®MongoDBçš„ç›‘å¬ç«¯å£,æ•°æ®åº“ç›®å½•,æ—¥å¿—å­˜æ”¾ä½ç½®,æ—¥å¿—è¾“å‡ºæ–¹å¼ä»¥åŠæ˜¯å¦å¼€å¯åå°è¿è¡Œç­‰:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/data/mongodb/data/ </span><br><span class="line">vim mongodb.conf</span><br></pre></td></tr></table></figure>

<p>mongodb.conf å…·ä½“é…ç½®ä¿¡æ¯å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># ç«¯å£å· </span><br><span class="line">port=27017</span><br><span class="line"># æ•°æ®åº“è·¯å¾„ </span><br><span class="line">dbpath=/opt/data/mongodb/data/db </span><br><span class="line"># æ—¥å¿—è¾“å‡ºæ–‡ä»¶è·¯å¾„ </span><br><span class="line">logpath=/opt/data/mongodb/data/logs/mongodb.log </span><br><span class="line">pidfilepath=/opt/data/mongodb/data/mongo.pid </span><br><span class="line"># è®¾ç½®åå°è¿è¡Œ </span><br><span class="line">fork=true </span><br><span class="line"># æ—¥å¿—è¾“å‡ºæ–¹å¼ </span><br><span class="line">logappend=true</span><br><span class="line"># å¯åŠ¨httpç•Œé¢,ç«¯å£å·ä¸º28017 </span><br><span class="line">httpinterface=true</span><br></pre></td></tr></table></figure>

<h5 id="5-å¯åŠ¨MongoDBæœåŠ¡"><a href="#5-å¯åŠ¨MongoDBæœåŠ¡" class="headerlink" title="5.å¯åŠ¨MongoDBæœåŠ¡"></a>5.å¯åŠ¨MongoDBæœåŠ¡</h5><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨MongoDBæœåŠ¡:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/modules/mongodb/ </span><br><span class="line">bin/mongod --config /opt/data/mongodb/data/mongodb.conf</span><br></pre></td></tr></table></figure>

<p>ä¼šæ‰“å°ä¸‹é¢ä¿¡æ¯ï¼šabout to fork child process, waiting until server is ready for connections.
forked process: 20913
child process started successfully, parent exiting</p>
<h5 id="6-éªŒè¯MongoDBæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ"><a href="#6-éªŒè¯MongoDBæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ" class="headerlink" title="6.éªŒè¯MongoDBæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ"></a>6.éªŒè¯MongoDBæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:27017</span><br></pre></td></tr></table></figure>

<p>æˆåŠŸæ‰“å°COMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
mongod  20913 root    7u  IPv4 376964      0t0  TCP *:27017 (LISTEN)
å¯ä»¥é€šè¿‡ipè®¿é—®,http://ä½ çš„å…¬ç½‘ip:28017/, æ˜¾ç¤ºæ•°æ®åº“ä¸€äº›ä¿¡æ¯,è¯´æ˜å¯åŠ¨æˆåŠŸäº†
It looks like you are trying to access MongoDB over HTTP on the native driver port.</p>
<h4 id="ubuntuç¯å¢ƒ"><a href="#ubuntuç¯å¢ƒ" class="headerlink" title="ubuntuç¯å¢ƒ"></a>ubuntuç¯å¢ƒ</h4><p><a href="https://docs.mongodb.com/master/tutorial/install-mongodb-on-ubuntu/" target="_blank" rel="noopener">ubunutä¸‹å®‰è£…</a></p>
<h6 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h6><ol>
<li><p>Update Homebrewâ€™s package database.
 In a system shell ,issue the following command:</p>
<blockquote>
<p>brew update</p>
</blockquote>
</li>
<li><p>Install MongoDB.
 You can install MongoDB via brew with several different options.Use one of the following operations:</p>
<ul>
<li><p>Install the MongoDB binaries
  To install the MongoDB binaries ,issue the following command in system shell:</p>
<blockquote>
<p>brew install mongodb</p>
</blockquote>
</li>
<li><p>Install the MongoDB Binaries with TLS/SSL Support
  To install the MongoDB binaries that have TLS/SSL suport ,issue the following from a system shell:</p>
<blockquote>
<p>brew install mongodb â€“with-openssl</p>
</blockquote>
</li>
<li><p>Install the Lastest Development Release of MongoDB
  To install the lastest development release for use in testing and development,issue the following command in a system shell:</p>
<blockquote>
<p>brew install mongodb â€“devel</p>
</blockquote>
</li>
</ul>
</li>
<li><p>Install MongoDB Community Edition Manually.
Only install MongoDB Community Edition using this procedure if you cannot use homebrew.</p>
<ul>
<li>Download the binary files for the desired release of MongoDB<pre><code>Download the binaries from https://www.mongodb.org/downloads.
For example, to download the latest release through the shell, issue the following:</code></pre><blockquote>
<p>curl -O <a href="https://fastdl.mongodb.org/osx/mongodb-osx-x86_64-3.2.6.tgz" target="_blank" rel="noopener">https://fastdl.mongodb.org/osx/mongodb-osx-x86_64-3.2.6.tgz</a></p>
</blockquote>
</li>
<li>Extract the files from the downloaded archive.<pre><code>For example, from a system shell, you can extract through the tar command:</code></pre><blockquote>
<p>tar -zxvf mongodb-osx-x86_64-3.2.6.tgz</p>
</blockquote>
</li>
<li>Copy the extracted archive to the target directo<pre><code>Copy the extracted folder to the location from which MongoDB will run.</code></pre><blockquote>
<p>mkdir -p mongodb</p>
<pre><code>cp -R -n mongodb-osx-x86_64-3.2.6/ mongodb</code></pre></blockquote>
</li>
<li>Ensure the location of the binaries is in the PATH variable.<pre><code>The MongoDB binaries are in the bin/ directory of the archive. To ensure that the binaries are in your PATH, you can modify your PATH.
For example, you can add the following line to your shellâ€™s rc file (e.g. ~/.bashrc):</code></pre><blockquote>
<p>export PATH=<mongodb-install-directory>/bin:$PATH</mongodb-install-directory></p>
</blockquote>
</li>
</ul>
</li>
</ol>
<p>Replace <mongodb-install-directory> with the path to the extracted MongoDB archive.</mongodb-install-directory></p>
<h6 id="brew-å®‰è£…ç»“æœ"><a href="#brew-å®‰è£…ç»“æœ" class="headerlink" title="brew å®‰è£…ç»“æœ"></a>brew å®‰è£…ç»“æœ</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">brew install mongodb</span><br><span class="line">==&gt; Installing dependencies for mongodb: openssl</span><br><span class="line">==&gt; Installing mongodb dependency: openssl</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2h_1.el_capitan</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; Pouring openssl-1.0.2h_1.el_capitan.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">A CA file has been bootstrapped using certificates from the system</span><br><span class="line">keychain. To add additional certificates, place .pem files in</span><br><span class="line">  /usr/local/etc/openssl/certs</span><br><span class="line"></span><br><span class="line">and run</span><br><span class="line">  /usr/local/opt/openssl/bin/c_rehash</span><br><span class="line"></span><br><span class="line">This formula is keg-only, which means it was not symlinked into /usr/local.</span><br><span class="line"></span><br><span class="line">Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries</span><br><span class="line"></span><br><span class="line">Generally there are no consequences of this for you. If you build your</span><br><span class="line">own software and it requires this formula, you&apos;ll need to add to your</span><br><span class="line">build variables:</span><br><span class="line"></span><br><span class="line">    LDFLAGS:  -L/usr/local/opt/openssl/lib</span><br><span class="line">    CPPFLAGS: -I/usr/local/opt/openssl/include</span><br><span class="line"></span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/openssl/1.0.2h_1: 1,691 files, 12M</span><br><span class="line">==&gt; Installing mongodb</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/mongodb-3.2.6.el_capitan.bo</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; Pouring mongodb-3.2.6.el_capitan.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">To have launchd start mongodb now and restart at login:</span><br><span class="line">  brew services start mongodb</span><br><span class="line">Or, if you don&apos;t want/need a background service you can just run:</span><br><span class="line">  mongod --config /usr/local/etc/mongod.conf</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/mongodb/3.2.6: 17 files, 263.8M</span><br></pre></td></tr></table></figure>

<h6 id="Run-MongoDB"><a href="#Run-MongoDB" class="headerlink" title="Run MongoDB"></a>Run MongoDB</h6><p>1.Create the data directory
Before you start MongoDB for the first time ,create the directory to which the mongod process will write data.By default ,the mongod process uses the /data/db/directory.If you create a directory other than this one ,you must specify that directory in the dbpath option when starting the mongod proecss later in this peocedure.
The following example command creates the default /data/db directory:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/db</span><br></pre></td></tr></table></figure>

<p>2.Set permissions for the data direcory.
Before running mongod for the first time,ensure that the user account running mongod has read and write permissions for the directory.
3.Run MongoDB.
To run MongoDB,run the mongod process at the system prompt.If necessary,specify the path the mongod or the data directory.See the following examples.</p>
<ul>
<li><p>Run without specifying paths
If your system Path variable includes the location of the mongod binary and if you use the default data directory(i.e.,/data/db),simply enter mongod at the system prompt:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod</span><br></pre></td></tr></table></figure>
</li>
<li><p>Specify the path of the mongod
If your PATH does not include the location of the mongod binary,enter the full path to the mongod binary at the system prompt:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path to binary&gt;/mongod</span><br></pre></td></tr></table></figure>
</li>
<li><p>Specify the path of the data directory
If you do not use the defautl data directory (i.i.,/data/db),specify the path to the data directory using the â€“dbpath option:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath &lt;path to data directory&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Begin using MongoDB.
mongod é»˜è®¤æ•°æ®ä¿å­˜è·¯å¾„:/data/db/    é»˜è®¤ç«¯å£:27017
ä¿®æ”¹é»˜è®¤è·¯å¾„:â€“dbpath
ä¿®æ”¹é»˜è®¤ç«¯å£:â€“port
å¯åŠ¨åå°æœåŠ¡:â€“fork(å¿…é¡»ä½¿ç”¨â€“logpathè‡ªåŠ¨åˆ›å»ºæ—¥å¿—è¾“å‡ºç›®å½•)</p>
</li>
</ul>
<h6 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h6><p>1.å¯åŠ¨</p>
<ul>
<li>mongod å¯åŠ¨mongoæœåŠ¡</li>
<li>mongo å¯åŠ¨å®¢æˆ·ç«¯</li>
</ul>
<p>2.åœæ­¢æœåŠ¡</p>
<ul>
<li><p>æ–¹æ³•ä¸€
ps -ef | grep mongodb æ‰¾åˆ°ä½ è¦æŸ¥æ‰¾çš„è¿›ç¨‹å·
kill - 2 pid  æ€æ‰</p>
</li>
<li><p>æ–¹æ³•äºŒ
è¿›å…¥mongoæ•°æ®åº“é‡Œé¢è¿›è¡Œæ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br><span class="line">use admin</span><br><span class="line">db.shutdownServer();</span><br></pre></td></tr></table></figure>
</li>
<li><p>é”™è¯¯
åœ¨linuxä¸‹å¤§å®¶åœæ­¢å¾ˆå¤šæœåŠ¡å–œæ¬¢ç›´æ¥kill -9 PID,ä½†æ˜¯å¯¹äºMongoDBå¦‚æœæ‰§è¡Œäº†kill - 9 PID,åœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶å¯èƒ½æç¤ºé”™è¯¯,å¯¼è‡´æœåŠ¡æ— æ³•å¯åŠ¨,è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡æ‰§è¡Œ:rm -f path/db/mongod.lock,ä¹Ÿå³åˆ é™¤æŒ‡å®šæ•°æ®ç›®å½•ä¸‹çš„mongod.locké—®ä»·å³å¯.</p>
</li>
</ul>
<h4 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h4><p>Iâ€™ve just installed MOngoDB via homebrew und want to start it via command line mongod.</p>
<p>When I do that, iâ€™ll get this message:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2016-03-05T19:23:55.763+0100 I CONTROL  [initandlisten] MongoDB starting : pid=52426 port=27017 dbpath=/data/db 64-bit host=Matthias-MBP</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten] db version v3.2.3</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten] git version: b326ba837cf6f49d65c2f85e1b70f6f31ece7937</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten] allocator: system</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten] modules: none</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten] build environment:</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten]     distarch: x86_64</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten]     target_arch: x86_64</span><br><span class="line">2016-03-05T19:23:55.764+0100 I CONTROL  [initandlisten] options: &#123;&#125;</span><br><span class="line">2016-03-05T19:23:55.765+0100 I -        [initandlisten] Detected data files in /data/db created by the &apos;wiredTiger&apos; storage engine, so setting the active storage engine to &apos;wiredTiger&apos;.</span><br><span class="line">2016-03-05T19:23:55.765+0100 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=4G,session_max=20000,eviction=(threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),</span><br><span class="line">2016-03-05T19:23:56.483+0100 I CONTROL  [initandlisten]</span><br><span class="line">2016-03-05T19:23:56.483+0100 I CONTROL  [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000</span><br><span class="line">2016-03-05T19:23:56.486+0100 I NETWORK  [HostnameCanonicalizationWorker] Starting hostname canonicalization worker</span><br><span class="line">2016-03-05T19:23:56.486+0100 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory &apos;/data/db/diagnostic.data&apos;</span><br><span class="line">2016-03-05T19:23:56.488+0100 I NETWORK  [initandlisten] waiting for connections on port 27017</span><br><span class="line">2016-03-05T19:23:56.513+0100 W NETWORK  [HostnameCanonicalizationWorker] Failed to obtain address information for hostname Matthias-MBP: nodename nor servname provided, or not known</span><br></pre></td></tr></table></figure>

<p>The last line doesnâ€™t sound correct. What is the problem?
The first line of logs says</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MongoDB starting : pid=52426 port=27017 dbpath=/data/db 64-bit host=Matthias-MBP&quot;.</span><br></pre></td></tr></table></figure>

<p>Notice that host name is Matthias-MBP, so you can add 127.0.0.1 Matthias-MBP in /etc/hosts file. After Ctrl-C and re-run mongod, the error message will disappear.</p>
<h2 id="æ“ä½œç›¸å…³"><a href="#æ“ä½œç›¸å…³" class="headerlink" title="æ“ä½œç›¸å…³"></a>æ“ä½œç›¸å…³</h2><h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><ol>
<li><p>HelpæŸ¥çœ‹å‘½ä»¤æç¤º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">help</span><br><span class="line">db.help();</span><br><span class="line">db.yourColl.help();</span><br><span class="line">db.youColl.find().help();</span><br><span class="line">rs.help();</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ‡æ¢/åˆ›å»ºæ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;use yourDB;</span><br><span class="line">å½“åˆ›å»ºä¸€ä¸ªé›†åˆ(table)çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºå½“å‰æ•°æ®åº“</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show dbs;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤å½“å‰ä½¿ç”¨æ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase();</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»æŒ‡å®šä¸»æœºä¸Šå…‹éš†æ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.cloneDatabase(â€œ127.0.0.1â€);</span><br><span class="line">å°†æŒ‡å®šæœºå™¨ä¸Šçš„æ•°æ®åº“çš„æ•°æ®å…‹éš†åˆ°å½“å‰æ•°æ®åº“</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»æŒ‡å®šçš„æœºå™¨ä¸Šå¤åˆ¶æŒ‡å®šæ•°æ®åº“æ•°æ®åˆ°æŸä¸ªæ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.copyDatabase(&quot;mydb&quot;, &quot;temp&quot;, &quot;127.0.0.1&quot;);</span><br><span class="line">å°†æœ¬æœºçš„mydbçš„æ•°æ®å¤åˆ¶åˆ°tempæ•°æ®åº“ä¸­</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®å¤å½“å‰æ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.repairDatabase();</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.getName();</span><br><span class="line">db;</span><br><span class="line">dbå’ŒgetNameæ–¹æ³•æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œéƒ½å¯ä»¥æŸ¥è¯¢å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ˜¾ç¤ºå½“å‰dbçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.stats();</span><br></pre></td></tr></table></figure>
</li>
<li><p>å½“å‰dbç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.version();</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹å½“å‰dbçš„é“¾æ¥æœºå™¨åœ°å€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.getMongo();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Collectionèšé›†é›†åˆ"><a href="#Collectionèšé›†é›†åˆ" class="headerlink" title="Collectionèšé›†é›†åˆ"></a>Collectionèšé›†é›†åˆ</h3><ol>
<li><p>åˆ›å»ºä¸€ä¸ªèšé›†é›†åˆï¼ˆtableï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(â€œcollNameâ€, &#123;size: 20, capped: 5, max: 100&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾—åˆ°æŒ‡å®šåç§°çš„èšé›†é›†åˆï¼ˆtableï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.getCollection(&quot;account&quot;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾—åˆ°å½“å‰dbçš„æ‰€æœ‰èšé›†é›†åˆ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.getCollectionNames();</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ˜¾ç¤ºå½“å‰dbæ‰€æœ‰èšé›†ç´¢å¼•çš„çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.printCollectionStats();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="ç”¨æˆ·ç›¸å…³"><a href="#ç”¨æˆ·ç›¸å…³" class="headerlink" title="ç”¨æˆ·ç›¸å…³"></a>ç”¨æˆ·ç›¸å…³</h3><ol>
<li>æ·»åŠ ä¸€ä¸ªç”¨æˆ·<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.addUser(&quot;name&quot;);</span><br><span class="line">db.addUser(&quot;userName&quot;, &quot;pwd123&quot;, true);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>æ·»åŠ ç”¨æˆ·ã€è®¾ç½®å¯†ç ã€æ˜¯å¦åªè¯»</p>
<ol start="2">
<li><p>æ•°æ®åº“è®¤è¯ã€å®‰å…¨æ¨¡å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.auth(&quot;userName&quot;, &quot;123123&quot;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ˜¾ç¤ºå½“å‰æ‰€æœ‰ç”¨æˆ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show users;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤ç”¨æˆ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.removeUser(&quot;userName&quot;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><ol>
<li><p>æŸ¥è¯¢ä¹‹å‰çš„é”™è¯¯ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.getPrevError();</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¸…é™¤é”™è¯¯è®°å½•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.resetError();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Collectionèšåˆé›†åˆæ“ä½œ"><a href="#Collectionèšåˆé›†åˆæ“ä½œ" class="headerlink" title="Collectionèšåˆé›†åˆæ“ä½œ"></a>Collectionèšåˆé›†åˆæ“ä½œ</h2><p>###æŸ¥çœ‹èšé›†é›†åˆåŸºæœ¬ä¿¡æ¯</p>
<ol>
<li><p>æŸ¥çœ‹å¸®åŠ©</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.yourColl.help();</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢å½“å‰é›†åˆçš„æ•°æ®æ¡æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.yourColl.count();</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹æ•°æ®ç©ºé—´å¤§å°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.dataSize();</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾—åˆ°å½“å‰èšé›†é›†åˆæ‰€åœ¨çš„db</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.getDB();</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾—åˆ°å½“å‰èšé›†çš„çŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.stats();</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾—åˆ°èšé›†é›†åˆæ€»å¤§å°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.totalSize();</span><br></pre></td></tr></table></figure>
</li>
<li><p>èšé›†é›†åˆå‚¨å­˜ç©ºé—´å¤§å°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.storageSize();</span><br></pre></td></tr></table></figure>
</li>
<li><p>Shardç‰ˆæœ¬ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.getShardVersion()</span><br></pre></td></tr></table></figure>
</li>
<li><p>èšé›†é›†åˆé‡å‘½å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.renameCollection(&quot;users&quot;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>å°†userInfoé‡å‘½åä¸ºusers</p>
<ol start="10">
<li>åˆ é™¤å½“å‰èšé›†é›†åˆ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.drop();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="èšé›†é›†åˆæŸ¥è¯¢"><a href="#èšé›†é›†åˆæŸ¥è¯¢" class="headerlink" title="èšé›†é›†åˆæŸ¥è¯¢"></a>èšé›†é›†åˆæŸ¥è¯¢</h3><ol>
<li>æŸ¥è¯¢æ‰€æœ‰è®°å½•<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.find();</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>ç›¸å½“äºï¼š<code>select * from userInfo;</code>
é»˜è®¤æ¯é¡µæ˜¾ç¤º20æ¡è®°å½•ï¼Œå½“æ˜¾ç¤ºä¸ä¸‹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨itè¿­ä»£å‘½ä»¤æŸ¥è¯¢ä¸‹ä¸€é¡µæ•°æ®ã€‚æ³¨æ„ï¼šé”®å…¥itå‘½ä»¤ä¸èƒ½å¸¦â€œï¼›â€
ä½†æ˜¯ä½ å¯ä»¥è®¾ç½®æ¯é¡µæ˜¾ç¤ºæ•°æ®çš„å¤§å°ï¼Œç”¨DBQuery.shellBatchSize = 50;è¿™æ ·æ¯é¡µå°±æ˜¾ç¤º50æ¡è®°å½•äº†ã€‚</p>
<ol start="2">
<li>æŸ¥è¯¢å»æ‰åçš„å½“å‰èšé›†é›†åˆä¸­çš„æŸåˆ—çš„é‡å¤æ•°æ®<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.distinct(&quot;name&quot;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>ä¼šè¿‡æ»¤æ‰nameä¸­çš„ç›¸åŒæ•°æ®
ç›¸å½“äºï¼š<code>select distict name from userInfo;</code></p>
<ol start="3">
<li><p>æŸ¥è¯¢age = 22çš„è®°å½•
<code>db.userInfo.find({&quot;age&quot;: 22});</code>
ç›¸å½“äºï¼š <code>select * from userInfo where age = 22;</code></p>
</li>
<li><p>æŸ¥è¯¢age &gt; 22çš„è®°å½•
<code>db.userInfo.find({age: {$gt: 22}});</code>
ç›¸å½“äºï¼š<code>select * from userInfo where age &gt; 22;</code></p>
</li>
<li><p>æŸ¥è¯¢age &lt; 22çš„è®°å½•
<code>db.userInfo.find({age: {$lt: 22}});</code>
ç›¸å½“äºï¼š<code>select * from userInfo where age &lt; 22;</code></p>
</li>
<li><p>æŸ¥è¯¢age &gt;= 25çš„è®°å½•
<code>db.userInfo.find({age: {$gte: 25}});</code>
ç›¸å½“äºï¼š<code>select * from userInfo where age &gt;= 25;</code></p>
</li>
<li><p>æŸ¥è¯¢age &lt;= 25çš„è®°å½•
<code>db.userInfo.find({age: {$lte: 25}});</code></p>
</li>
<li><p>æŸ¥è¯¢age &gt;= 23 å¹¶ä¸” age &lt;= 26
<code>db.userInfo.find({age: {$gte: 23, $lte: 26}});</code></p>
</li>
<li><p>æŸ¥è¯¢nameä¸­åŒ…å« mongoçš„æ•°æ®
<code>db.userInfo.find({name: /mongo/});</code>
//ç›¸å½“äº%%
<code>select * from userInfo where name like â€˜%mongo%â€™;</code></p>
</li>
<li><p>æŸ¥è¯¢nameä¸­ä»¥mongoå¼€å¤´çš„
<code>db.userInfo.find({name: /^mongo/});</code>
<code>select * from userInfo where name like â€˜mongo%â€™;</code></p>
</li>
<li><p>æŸ¥è¯¢æŒ‡å®šåˆ—nameã€ageæ•°æ®
<code>db.userInfo.find({}, {name: 1, age: 1});</code>
ç›¸å½“äºï¼š<code>select name, age from userInfo;</code>
å½“ç„¶nameä¹Ÿå¯ä»¥ç”¨trueæˆ–false,å½“ç”¨tureçš„æƒ…å†µä¸‹æ²³name:1æ•ˆæœä¸€æ ·ï¼Œå¦‚æœç”¨falseå°±æ˜¯æ’é™¤nameï¼Œæ˜¾ç¤ºnameä»¥å¤–çš„åˆ—ä¿¡æ¯ã€‚</p>
</li>
</ol>
<p>12ã€æŸ¥è¯¢æŒ‡å®šåˆ—nameã€ageæ•°æ®, age &gt; 25
<code>db.userInfo.find({age: {$gt: 25}}, {name: 1, age: 1});</code>
ç›¸å½“äºï¼š<code>select name, age from userInfo where age &gt; 25;</code></p>
<ol start="13">
<li><p>æŒ‰ç…§å¹´é¾„æ’åº
å‡åºï¼š<code>db.userInfo.find().sort({age: 1});</code>
é™åºï¼š<code>db.userInfo.find().sort({age: -1});</code></p>
</li>
<li><p>æŸ¥è¯¢name = zhangsan, age = 22çš„æ•°æ®
<code>db.userInfo.find({name: &#39;zhangsan&#39;, age: 22});</code>
ç›¸å½“äºï¼š<code>select * from userInfo where name = â€˜zhangsanâ€™ and age = â€˜22â€™;</code></p>
</li>
<li><p>æŸ¥è¯¢å‰5æ¡æ•°æ®
<code>db.userInfo.find().limit(5);</code>
ç›¸å½“äºï¼š<code>select top 5 * from userInfo;</code></p>
</li>
<li><p>æŸ¥è¯¢10æ¡ä»¥åçš„æ•°æ®
<code>db.userInfo.find().skip(10);</code>
ç›¸å½“äºï¼š<code>select * from userInfo where id not in (
select top 10 * from userInfo
);</code></p>
</li>
<li><p>æŸ¥è¯¢åœ¨5-10ä¹‹é—´çš„æ•°æ®
<code>db.userInfo.find().limit(10).skip(5);</code>
å¯ç”¨äºåˆ†é¡µï¼Œlimitæ˜¯pageSizeï¼Œskipæ˜¯ç¬¬å‡ é¡µ*pageSize</p>
</li>
<li><p>orä¸ æŸ¥è¯¢
<code>db.userInfo.find({$or: [{age: 22}, {age: 25}]});</code>
ç›¸å½“äºï¼š<code>select * from userInfo where age = 22 or age = 25;</code></p>
</li>
<li><p>æŸ¥è¯¢ç¬¬ä¸€æ¡æ•°æ®
<code>db.userInfo.findOne();</code>
ç›¸å½“äºï¼š<code>select top 1 * from userInfo;
db.userInfo.find().limit(1);</code></p>
</li>
<li><p>æŸ¥è¯¢æŸä¸ªç»“æœé›†çš„è®°å½•æ¡æ•°
<code>db.userInfo.find({age: {$gte: 25}}).count();</code>
ç›¸å½“äºï¼š<code>select count(*) from userInfo where age &gt;= 20;</code></p>
</li>
<li><p>æŒ‰ç…§æŸåˆ—è¿›è¡Œæ’åº
<code>db.userInfo.find({sex: {$exists: true}}).count();</code>
ç›¸å½“äºï¼š<code>select count(sex) from userInfo;</code></p>
</li>
</ol>
<h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><ol>
<li><p>åˆ›å»ºç´¢å¼•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.userInfo.ensureIndex(&#123;name: 1&#125;);</span><br><span class="line">db.userInfo.ensureIndex(&#123;name: 1, ts: -1&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥è¯¢å½“å‰èšé›†é›†åˆæ‰€æœ‰ç´¢å¼•
<code>db.userInfo.getIndexes();</code></p>
</li>
<li><p>æŸ¥çœ‹æ€»ç´¢å¼•è®°å½•å¤§å°
<code>db.userInfo.totalIndexSize();</code></p>
</li>
<li><p>è¯»å–å½“å‰é›†åˆçš„æ‰€æœ‰indexä¿¡æ¯
<code>db.users.reIndex();</code></p>
</li>
<li><p>åˆ é™¤æŒ‡å®šç´¢å¼•
<code>db.users.dropIndex(&quot;name_1&quot;);</code></p>
</li>
<li><p>åˆ é™¤æ‰€æœ‰ç´¢å¼•ç´¢å¼•
<code>db.users.dropIndexes();</code></p>
</li>
</ol>
<h3 id="ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤é›†åˆæ•°æ®"><a href="#ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤é›†åˆæ•°æ®" class="headerlink" title="ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤é›†åˆæ•°æ®"></a>ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤é›†åˆæ•°æ®</h3><ol>
<li><p>æ·»åŠ 
<code>db.users.save({name: â€˜zhangsanâ€™, age: 25, sex: true});</code>
æ·»åŠ çš„æ•°æ®çš„æ•°æ®åˆ—ï¼Œæ²¡æœ‰å›ºå®šï¼Œæ ¹æ®æ·»åŠ çš„æ•°æ®ä¸ºå‡†</p>
</li>
<li><p>ä¿®æ”¹
<code>db.users.update({age: 25}, {$set: {name: &#39;changeName&#39;}}, false, true);</code>
ç›¸å½“äºï¼š<code>update users set name = â€˜changeNameâ€™ where age = 25;</code></p>
</li>
</ol>
<p><code>db.users.update({name: &#39;Lisi&#39;}, {$inc: {age: 50}}, false, true);</code>
ç›¸å½“äºï¼š<code>update users set age = age + 50 where name = â€˜Lisiâ€™;</code></p>
<p><code>db.users.update({name: &#39;Lisi&#39;}, {$inc: {age: 50}, $set: {name: &#39;hoho&#39;}}, false, true);</code>
ç›¸å½“äºï¼š<code>update users set age = age + 50, name = â€˜hohoâ€™ where name = â€˜Lisiâ€™;</code></p>
<ol start="3">
<li><p>åˆ é™¤
<code>db.users.remove({age: 132});</code></p>
</li>
<li><p>æŸ¥è¯¢ä¿®æ”¹åˆ é™¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">db.users.findAndModify(&#123;</span><br><span class="line">    query: &#123;age: &#123;$gte: 25&#125;&#125;,</span><br><span class="line">    sort: &#123;age: -1&#125;,</span><br><span class="line">    update: &#123;$set: &#123;name: &apos;a2&apos;&#125;, $inc: &#123;age: 2&#125;&#125;,</span><br><span class="line">    remove: true</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">db.runCommand(&#123; findandmodify : &quot;users&quot;,</span><br><span class="line">    query: &#123;age: &#123;$gte: 25&#125;&#125;,</span><br><span class="line">    sort: &#123;age: -1&#125;,</span><br><span class="line">    update: &#123;$set: &#123;name: &apos;a2&apos;&#125;, $inc: &#123;age: 2&#125;&#125;,</span><br><span class="line">    remove: true</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>update æˆ– remove å…¶ä¸­ä¸€ä¸ªæ˜¯å¿…é¡»çš„å‚æ•°; å…¶ä»–å‚æ•°å¯é€‰ã€‚
|å‚æ•°|è¯¦è§£|é»˜è®¤å€¼|
|â€”|â€”|â€”|
|query|æŸ¥è¯¢è¿‡æ»¤æ¡ä»¶|{}|
|sort|å¦‚æœå¤šä¸ªæ–‡æ¡£ç¬¦åˆæŸ¥è¯¢è¿‡æ»¤æ¡ä»¶ï¼Œå°†ä»¥è¯¥å‚æ•°æŒ‡å®šçš„æ’åˆ—æ–¹å¼é€‰æ‹©å‡ºæ’åœ¨é¦–ä½çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†è¢«æ“ä½œ|{}|
|remove|è‹¥ä¸ºtrueï¼Œè¢«é€‰ä¸­å¯¹è±¡å°†åœ¨è¿”å›å‰è¢«åˆ é™¤|N/A|
|update|ä¸€ä¸ª ä¿®æ”¹å™¨å¯¹è±¡|N/A|
|new|è‹¥ä¸ºtrueï¼Œå°†è¿”å›ä¿®æ”¹åçš„å¯¹è±¡è€Œä¸æ˜¯åŸå§‹å¯¹è±¡ã€‚åœ¨åˆ é™¤æ“ä½œä¸­ï¼Œè¯¥å‚æ•°è¢«å¿½ç•¥ã€‚|false|
|fields|å‚è§Retrieving a Subset of Fields (1.5.0+)|All fields|
|upsert|åˆ›å»ºæ–°å¯¹è±¡è‹¥æŸ¥è¯¢ç»“æœä¸ºç©ºã€‚ ç¤ºä¾‹ (1.5.4+)|false|</p>
<h3 id="è¯­å¥å—æ“ä½œ"><a href="#è¯­å¥å—æ“ä½œ" class="headerlink" title="è¯­å¥å—æ“ä½œ"></a>è¯­å¥å—æ“ä½œ</h3><ol>
<li><p>ç®€å•Hello World
<code>print(&quot;Hello World!&quot;);</code>
è¿™ç§å†™æ³•è°ƒç”¨äº†printå‡½æ•°ï¼Œå’Œç›´æ¥å†™å…¥â€Hello World!â€çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼›</p>
</li>
<li><p>å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆjson</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tojson(new Object());</span><br><span class="line">tojson(new Object(&apos;a&apos;));</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¾ªç¯æ·»åŠ æ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; for (var i = 0; i &lt; 30; i++) &#123;</span><br><span class="line">... db.users.save(&#123;name: &quot;u_&quot; + i, age: 22 + i, sex: i % 2&#125;);</span><br><span class="line">... &#125;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>è¿™æ ·å°±å¾ªç¯æ·»åŠ äº†30æ¡æ•°æ®ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥çœç•¥æ‹¬å·çš„å†™æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; for (var i = 0; i &lt; 30; i++) db.users.save(&#123;name: &quot;u_&quot; + i, age: 22 + i, sex: i % 2&#125;);</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå½“ä½ ç”¨db.users.find()æŸ¥è¯¢çš„æ—¶å€™ï¼Œæ˜¾ç¤ºå¤šæ¡æ•°æ®è€Œæ— æ³•ä¸€é¡µæ˜¾ç¤ºçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨itæŸ¥çœ‹ä¸‹ä¸€é¡µçš„ä¿¡æ¯ï¼›</p>
<ol start="4">
<li>find æ¸¸æ ‡æŸ¥è¯¢<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;var cursor = db.users.find();</span><br><span class="line">&gt; while (cursor.hasNext()) &#123;</span><br><span class="line">    printjson(cursor.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>è¿™æ ·å°±æŸ¥è¯¢æ‰€æœ‰çš„usersä¿¡æ¯ï¼ŒåŒæ ·å¯ä»¥è¿™æ ·å†™</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var cursor = db.users.find();</span><br><span class="line">while (cursor.hasNext()) &#123; printjson(cursor.next); &#125;</span><br></pre></td></tr></table></figure>

<p>åŒæ ·å¯ä»¥çœç•¥{}å·</p>
<ol start="5">
<li><p>forEachè¿­ä»£å¾ªç¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.users.find().forEach(printjson);</span><br><span class="line">forEachä¸­å¿…é¡»ä¼ é€’ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†æ¯æ¡è¿­ä»£çš„æ•°æ®ä¿¡æ¯</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°†findæ¸¸æ ‡å½“æ•°ç»„å¤„ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var cursor = db.users.find();</span><br><span class="line">cursor[4];</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>å–å¾—ä¸‹æ ‡ç´¢å¼•ä¸º4çš„é‚£æ¡æ•°æ®
æ—¢ç„¶å¯ä»¥å½“åšæ•°ç»„å¤„ç†ï¼Œé‚£ä¹ˆå°±å¯ä»¥è·å¾—å®ƒçš„é•¿åº¦ï¼šcursor.length();æˆ–è€…cursor.count();
é‚£æ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å¾ªç¯æ˜¾ç¤ºæ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 0, len = c.length(); i &lt; len; i++) printjson(c[i]);</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>å°†findæ¸¸æ ‡è½¬æ¢æˆæ•°ç»„<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; var arr = db.users.find().toArray();</span><br><span class="line">&gt; printjson(arr[2]);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>ç”¨toArrayæ–¹æ³•å°†å…¶è½¬æ¢ä¸ºæ•°ç»„</p>
<ol start="8">
<li>å®šåˆ¶æˆ‘ä»¬è‡ªå·±çš„æŸ¥è¯¢ç»“æœ
åªæ˜¾ç¤ºage &lt;= 28çš„å¹¶ä¸”åªæ˜¾ç¤ºageè¿™åˆ—æ•°æ®<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.users.find(&#123;age: &#123;$lte: 28&#125;&#125;, &#123;age: 1&#125;).forEach(printjson);</span><br><span class="line">db.users.find(&#123;age: &#123;$lte: 28&#125;&#125;, &#123;age: true&#125;).forEach(printjson);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>æ’é™¤ageçš„åˆ—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.users.find(&#123;age: &#123;$lte: 28&#125;&#125;, &#123;age: false&#125;).forEach(printjson);</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>forEachä¼ é€’å‡½æ•°æ˜¾ç¤ºä¿¡æ¯<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.things.find(&#123;x:4&#125;).forEach(function(x) &#123;print(tojson(x));&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>ä¸Šé¢ä»‹ç»è¿‡forEachéœ€è¦ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä¼šæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯å½“å‰å¾ªç¯çš„å¯¹è±¡ï¼Œç„¶ååœ¨å‡½æ•°ä½“é‡å¤„ç†ä¼ å…¥çš„å‚æ•°</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>èµ</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="http://images.wodekouwei.com/Pay/weixin_qingkouwei.png" alt="è½»å£å‘³ WeChat Pay">
          <p>å¾®ä¿¡æ‰“èµ</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="http://images.wodekouwei.com/Pay/zhifubao_qingkouwei.jpg" alt="è½»å£å‘³ Alipay">
          <p>æ”¯ä»˜å®æ‰“èµ</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/26/env-centos-gitlab/" rel="next" title="env-centos-gitlab">
                <i class="fa fa-chevron-left"></i> env-centos-gitlab
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/16/db-redis/" rel="prev" title="db-redis">
                db-redis <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="http://images.wodekouwei.com/avatar/winnle_the_pooh.jpg" alt="è½»å£å‘³">
          <p class="site-author-name" itemprop="name">è½»å£å‘³</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">190</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">27</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">63</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/qingkouwei" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/LightTaste" target="_blank" title="å¾®åš">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  å¾®åš
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/turnpp/" target="_blank" title="è±†ç“£">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  è±†ç“£
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/shen-jun-wei-9/" target="_blank" title="çŸ¥ä¹">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  çŸ¥ä¹
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              å‹æƒ…é“¾æ¥
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/ossrs/srs" title="SRS" target="_blank">SRS</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mongoä¹‹å®‰è£…"><span class="nav-number">1.</span> <span class="nav-text">Mongoä¹‹å®‰è£…</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Centos"><span class="nav-number">1.1.</span> <span class="nav-text">Centos</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-ä¸‹è½½å®‰è£…åŒ…"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.ä¸‹è½½å®‰è£…åŒ…</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-è§£å‹ç¼©å®‰è£…åŒ…"><span class="nav-number">1.1.2.</span> <span class="nav-text">2.è§£å‹ç¼©å®‰è£…åŒ…</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-åˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½•å’Œæ—¥å¿—å­˜æ”¾ç›®å½•"><span class="nav-number">1.1.3.</span> <span class="nav-text">3.åˆ›å»ºæ•°æ®åº“å­˜æ”¾ç›®å½•å’Œæ—¥å¿—å­˜æ”¾ç›®å½•</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-åˆ›å»ºMongoDBé…ç½®æ–‡ä»¶mongodb-conf"><span class="nav-number">1.1.4.</span> <span class="nav-text">4.åˆ›å»ºMongoDBé…ç½®æ–‡ä»¶mongodb.conf</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-å¯åŠ¨MongoDBæœåŠ¡"><span class="nav-number">1.1.5.</span> <span class="nav-text">5.å¯åŠ¨MongoDBæœåŠ¡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-éªŒè¯MongoDBæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ"><span class="nav-number">1.1.6.</span> <span class="nav-text">6.éªŒè¯MongoDBæœåŠ¡æ˜¯å¦å¯åŠ¨æˆåŠŸ</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ubuntuç¯å¢ƒ"><span class="nav-number">1.2.</span> <span class="nav-text">ubuntuç¯å¢ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#æ­¥éª¤"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">æ­¥éª¤</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#brew-å®‰è£…ç»“æœ"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">brew å®‰è£…ç»“æœ</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Run-MongoDB"><span class="nav-number">1.2.0.3.</span> <span class="nav-text">Run MongoDB</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#æ³¨æ„äº‹é¡¹"><span class="nav-number">1.2.0.4.</span> <span class="nav-text">æ³¨æ„äº‹é¡¹</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#é”™è¯¯"><span class="nav-number">1.3.</span> <span class="nav-text">é”™è¯¯</span></a></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#æ“ä½œç›¸å…³"><span class="nav-number"></span> <span class="nav-text">æ“ä½œç›¸å…³</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•°æ®åº“"><span class="nav-number">1.</span> <span class="nav-text">æ•°æ®åº“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Collectionèšé›†é›†åˆ"><span class="nav-number">2.</span> <span class="nav-text">Collectionèšé›†é›†åˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç”¨æˆ·ç›¸å…³"><span class="nav-number">3.</span> <span class="nav-text">ç”¨æˆ·ç›¸å…³</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å…¶ä»–"><span class="nav-number">4.</span> <span class="nav-text">å…¶ä»–</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Collectionèšåˆé›†åˆæ“ä½œ"><span class="nav-number"></span> <span class="nav-text">Collectionèšåˆé›†åˆæ“ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#èšé›†é›†åˆæŸ¥è¯¢"><span class="nav-number">1.</span> <span class="nav-text">èšé›†é›†åˆæŸ¥è¯¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç´¢å¼•"><span class="nav-number">2.</span> <span class="nav-text">ç´¢å¼•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤é›†åˆæ•°æ®"><span class="nav-number">3.</span> <span class="nav-text">ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤é›†åˆæ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¯­å¥å—æ“ä½œ"><span class="nav-number">4.</span> <span class="nav-text">è¯­å¥å—æ“ä½œ</span></a></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">è½»å£å‘³</span>
</div>

<div>
<a href="http://www.miitbeian.gov.cn/">äº¬ICPå¤‡17018543å·</a>

        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      æœ¬ç«™è®¿å®¢æ•°
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      äººæ¬¡
    </span>
  

  
    <span class="site-pv">
      æœ¬ç«™æ€»è®¿é—®é‡
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      æ¬¡
    </span>
  
</div>


        
      </div>
    </div></footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "bb46b146831e4e34808d09cd94c85f50",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  
  


  

</body>
</html>
